!function(){"use strict";angular.module("masonry",["ng"]).directive("masonry",["$timeout",function(n){return{restrict:"AC",link:function(e,t,i){var o=t[0],r=angular.extend({itemSelector:".item"},angular.fromJson(i.masonry)),a=e.masonry=new Masonry(o,r),c=0;e.update=function(){c&&n.cancel(c),c=n(function(){c=0,a.reloadItems(),a.layout(),t.children(r.itemSelector).css("visibility","visible")},120)},e.removeBrick=function(){n(function(){a.reloadItems(),a.layout()},500)},e.appendBricks=function(n){a.appended(n)},e.$on("masonry.layout",function(){a.layout()}),e.update()}}}]).directive("masonryTile",function(){return{restrict:"AC",link:function(n,e){e.css("visibility","hidden");var t=e.parent("*[masonry]:first").scope(),i=t.update,o=t.removeBrick,r=t.appendBricks;i&&(imagesLoaded(e.get(0),i),e.ready(i)),r&&imagesLoaded(e.get(0),r(e)),n.$on("$destroy",function(){o&&o()})}}})}();